<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>êµ­ë°©ë³µì§€íšŒì›ì¦</title>
  <style>
    :root {
      --primary: #5b00eb;
      --muted: #8a84a0;
    }
    * { box-sizing: border-box; }
    body {
      font-family: system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans KR", sans-serif;
      margin: 0;
      padding: 0;
      background: #fff;
      text-align: center;
    }
    .container { padding: 20px; position: relative; min-height: 100vh; }
    .photo {
      width: 100%;
      max-width: 180px;
      aspect-ratio: 180/220;
      height: auto;
      object-fit: cover;
      margin: 10px auto;
      border-radius: 8px;
      display: block;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    }
    .name { font-size: 20px; font-weight: 800; }
    .sub-name { font-size: 16px; margin-bottom: 10px; }
    .approved {
      background-color: var(--primary);
      color: white;
      padding: 10px 16px;
      border-radius: 999px;
      width: 200px;
      margin: 0 auto 15px;
      font-weight: 800;
    }
    .qr-container { width: 120px; height: 120px; margin: 0 auto 15px; }
    .qr { width: 100%; height: 100%; object-fit: contain; display: block; }
    .date-time { font-size: 16px; margin: 10px 0; }
    .time { color: red; font-weight: 800; }
    .info { color: var(--primary); font-weight: 800; font-size: 18px; margin: 8px 0; }
    .notice { color: var(--muted); font-size: 14px; margin-top: 10px; }
    .logo { position: fixed; bottom: 8px; right: 8px; opacity: 0.08; width: 200px; max-width: 40vw; pointer-events: none; }
    #clock-display { position: absolute; top: 8px; right: 12px; font-size: 14px; }

    /* í¸ì§‘ íŒ¨ë„ */
    .editor-toggle {
      position: fixed; left: 12px; bottom: 12px; z-index: 20; border: 0; background: var(--primary); color: #fff;
      padding: 10px 14px; border-radius: 999px; font-weight: 700; box-shadow: 0 6px 18px rgba(91,0,235,0.25);
    }
    .panel {
      position: fixed; left: 12px; bottom: 64px; width: min(92vw, 360px); background: #fff; border: 1px solid #eee; border-radius: 16px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.12); text-align: left; padding: 14px; z-index: 20; display: none;
    }
    .panel.open { display: block; }
    .panel h2 { margin: 4px 0 8px; font-size: 16px; }
    .field { display: grid; gap: 6px; margin: 8px 0 12px; }
    .field label { font-size: 12px; color: #333; font-weight: 700; }
    .field input, .field textarea, .field select {
      width: 100%; padding: 8px 10px; border-radius: 10px; border: 1px solid #e5e5e5; font-size: 14px;
    }
    .tips { font-size: 12px; color: var(--muted); }
  </style>
</head>
<body>
  <div class="container">
    <div id="clock-display">--:-- ğŸ”‡</div>

    <img src="KakaoTalk_20250905_105804025.jpg" alt="ì¦ëª… ì‚¬ì§„" class="photo" id="profile-photo" />

    <div class="name" id="name">ì •ì¢…í›„</div>
    <div class="sub-name" id="subName">ì •ì˜ì¬ì˜ ì</div>
    <div class="approved" id="status">ìŠ¹ì¸ì™„ë£Œ</div>

    <div class="qr-container">
      <img id="qr" alt="QR Code" class="qr"
        src="https://api.qrserver.com/v1/create-qr-code/?size=120x120&data=%EC%8A%B9%EC%9D%B8%EC%99%84%EB%A3%8C"/>
    </div>

    <div class="date-time">
      <span id="date"></span>
      <span class="time" id="time"></span>
    </div>

    <div id="infoList">
      <div class="info">ã†ë§ˆíŠ¸ ì´ìš© ê°€ëŠ¥</div>
      <div class="info">ã†í˜¸í…”ì½˜ë„ ì´ìš© ê°€ëŠ¥</div>
    </div>

    <div class="notice">
      êµ­ë°©ë³µì§€ íšŒì›ì„ì„ ì¦ëª…í•©ë‹ˆë‹¤.<br />
      â€»ìº¡ì³ëœ í™”ë©´ì€ ì‚¬ìš©ì´ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤.
    </div>
  </div>

  <img src="logo.png" alt="ë¡œê³ " class="logo" />

  <!-- í¸ì§‘ íŒ¨ë„ -->
  <button class="editor-toggle" id="toggleEditor">í¸ì§‘</button>
  <div class="panel" id="editorPanel" role="dialog" aria-label="ì…ë ¥ íŒ¨ë„">
    <h2>ë‚´ìš© ì…ë ¥</h2>
    <div class="field">
      <label for="inpName">ì´ë¦„</label>
      <input id="inpName" placeholder="ì˜ˆ: í™ê¸¸ë™" />
    </div>
    <div class="field">
      <label for="inpSub">ë³´ì¡° ë¼ë²¨</label>
      <input id="inpSub" placeholder="ì˜ˆ: í™íŒì„œì˜ ì" />
    </div>
    <div class="field">
      <label for="inpStatus">ìƒíƒœ(ìƒë‹¨ ë³´ë¼ìƒ‰ ë°°ì§€)</label>
      <input id="inpStatus" placeholder="ì˜ˆ: ìŠ¹ì¸ì™„ë£Œ" />
    </div>
    <div class="field">
      <label for="inpQR">QR ë°ì´í„°</label>
      <input id="inpQR" placeholder="ì˜ˆ: ìŠ¹ì¸ì™„ë£Œ" />
      <div class="tips">í…ìŠ¤íŠ¸ê°€ ê·¸ëŒ€ë¡œ QRë¡œ ì¸ì½”ë”©ë©ë‹ˆë‹¤.</div>
    </div>
    <div class="field">
      <label for="inpInfo">ì•ˆë‚´ë¬¸ (ì¤„ë°”ê¿ˆìœ¼ë¡œ êµ¬ë¶„)</label>
      <textarea id="inpInfo" rows="3" placeholder="ì˜ˆ:\nã†ë§ˆíŠ¸ ì´ìš© ê°€ëŠ¥\nã†í˜¸í…”ì½˜ë„ ì´ìš© ê°€ëŠ¥"></textarea>
    </div>
    <div class="field">
      <label for="inpPhoto">ì¦ëª…ì‚¬ì§„ (íŒŒì¼ ì„ íƒ)</label>
      <input id="inpPhoto" type="file" accept="image/*" />
      <div class="tips">ì´ë¯¸ì§€ëŠ” ê¸°ê¸° ë‚´ì—ì„œë§Œ ì‚¬ìš©ë˜ë©° ì—…ë¡œë“œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</div>
    </div>
    <div class="field">
      <label for="inpLogo">ë¡œê³  (íŒŒì¼ ì„ íƒ, ì„ íƒì‚¬í•­)</label>
      <input id="inpLogo" type="file" accept="image/*" />
    </div>
  </div>

  <script>
    // Asia/Seoul ê³ ì • ì‹œê³„
    function updateDateTime() {
      const now = new Date();
      const fmtDate = new Intl.DateTimeFormat('ko-KR', { timeZone: 'Asia/Seoul', year: 'numeric', month: '2-digit', day: '2-digit' }).formatToParts(now);
      const fmtTime = new Intl.DateTimeFormat('ko-KR', { timeZone: 'Asia/Seoul', hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false }).formatToParts(now);

      const y = fmtDate.find(p => p.type === 'year').value;
      const m = fmtDate.find(p => p.type === 'month').value;
      const d = fmtDate.find(p => p.type === 'day').value;
      const hh = fmtTime.find(p => p.type === 'hour').value;
      const mm = fmtTime.find(p => p.type === 'minute').value;
      const ss = fmtTime.find(p => p.type === 'second').value;

      document.getElementById('date').textContent = `${y}ë…„ ${m}ì›” ${d}ì¼`;
      document.getElementById('time').textContent = `${hh}:${mm}:${ss}`;
      document.getElementById('clock-display').textContent = `${hh}:${mm} ğŸ”‡`;
    }

    setInterval(updateDateTime, 1000);
    updateDateTime();

    // URL ë§¤ê°œë³€ìˆ˜ -> ê°’ ì±„ìš°ê¸°
    const params = new URLSearchParams(location.search);
    function applyParams() {
      const name = params.get('name');
      const sub = params.get('sub');
      const status = params.get('status');
      const qr = params.get('qr');
      const info = params.get('info'); // í•­ëª©ì„ | ë¡œ êµ¬ë¶„
      const photo = params.get('photo'); // ì´ë¯¸ì§€ URL
      const logo = params.get('logo');

      if (name) document.getElementById('name').textContent = name;
      if (sub) document.getElementById('subName').textContent = sub;
      if (status) document.getElementById('status').textContent = status;
      if (qr) setQR(qr);
      if (photo) document.getElementById('profile-photo').src = photo;
      if (logo) document.querySelector('.logo').src = logo;
      if (info) {
        const list = document.getElementById('infoList');
        list.innerHTML = '';
        info.split('|').forEach(line => {
          if (!line.trim()) return;
          const div = document.createElement('div');
          div.className = 'info';
          div.textContent = line;
          list.appendChild(div);
        });
      }
    }

    function setQR(text) {
      const enc = encodeURIComponent(text);
      document.getElementById('qr').src = `https://api.qrserver.com/v1/create-qr-code/?size=120x120&data=${enc}`;
    }

    applyParams();

    // í¸ì§‘ íŒ¨ë„ ì œì–´ ë° ë¯¸ë¦¬ë³´ê¸° ë°˜ì˜
    const toggleBtn = document.getElementById('toggleEditor');
    const panel = document.getElementById('editorPanel');
    toggleBtn.addEventListener('click', () => panel.classList.toggle('open'));

    const $ = (id) => document.getElementById(id);
    $('inpName').addEventListener('input', e => { $('name').textContent = e.target.value || ' '; });
    $('inpSub').addEventListener('input', e => { $('subName').textContent = e.target.value || ' '; });
    $('inpStatus').addEventListener('input', e => { $('status').textContent = e.target.value || ' '; });
    $('inpQR').addEventListener('input', e => setQR(e.target.value || ''));
    $('inpInfo').addEventListener('input', e => {
      const list = $('infoList');
      list.innerHTML = '';
      (e.target.value.split('\n')).forEach(line => {
        if (!line.trim()) return;
        const div = document.createElement('div');
        div.className = 'info';
        div.textContent = line;
        list.appendChild(div);
      });
    });

    // ì‚¬ì§„/ë¡œê³  ë¡œì»¬ íŒŒì¼ ë¯¸ë¦¬ë³´ê¸° (ì—…ë¡œë“œ ì—†ìŒ)
    function fileToDataURL(file, cb) {
      const reader = new FileReader();
      reader.onload = () => cb(reader.result);
      reader.readAsDataURL(file);
    }
    $('inpPhoto').addEventListener('change', e => {
      const f = e.target.files?.[0];
      if (f) fileToDataURL(f, (url) => { $('profile-photo').src = url; });
    });
    $('inpLogo').addEventListener('change', e => {
      const f = e.target.files?.[0];
      if (f) fileToDataURL(f, (url) => { document.querySelector('.logo').src = url; });
    });
  </script>
</body>
</html>